<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <style>
        #field{
            height: 230px;
            width: 650px;
        }
        
    </style>
</head>
<body>
    
    <h1><mark>실습문제3</mark></h1>
<!-- action = "https://www.iei.or.kr/" -->
    <form  action = "https://www.iei.or.kr/" method = "get">
        <fieldset id = "field">
        
            <legend>회원가입</legend>
            아이디 : <input type = "text" name = "userId" id = "userId" onblur = "return membershipId();" required> <label id = "alertId"></label><br><br> 
            비밀번호 : <input type = "password" name = "userPwd" id = "userPwd" required><br><br>
            비밀번호 확인 : <input type = "password" name = "pwdCheck" id = "pwdCheck" onblur = "return membership();" required> <label id = "alertPwdCheck"></label><br><br>
            이름 : <input type = "text" name = "userName" id = "userName" required><br><br>
    
            <input type = "submit" value = "회원가입" onclick = "return membership();">
    
        </fieldset>
    </form>

    <script>
        function membership(){
            let userId = document.querySelector("#userId").value;
            let userPwd = document.querySelector("#userPwd").value;
            let pwdCheck = document.querySelector("#pwdCheck").value;

            let alertId = document.querySelector("#alertId");
            let alertPwdCheck = document.querySelector("#alertPwdCheck");

            // let arrId = ["user01"];

            // 아이디 확인
            if("user01" == userId){
                    alertId.innerHTML = "이미 존재하는 아이디입니다."
                    alertId.style.color = "red";
                    document.querySelector("#userId").select();
            }else if("user01" != userId){
                    alertId.innerHTML = "사용가능한 아이디입니다."
                    alertId.style.color = "green";
            }

            // 비밀번호 확인
            if(userPwd != pwdCheck){
                alertPwdCheck.innerHTML = "비밀번호가 일치하지 않습니다."
                alertPwdCheck.style.color = "red";
                document.querySelector("#pwdCheck").select();
            }else if(userPwd == pwdCheck){
                alertPwdCheck.innerHTML = "비밀번호가 일치합니다."
                alertPwdCheck.style.color = "green";
            }

            // 유효성 검사

             // 1) 아이디 검사
            //    첫글자는 영문자(소문자) , 
            //    전체적으로 영문자(소문자)+숫자로만 4~12글자 이하의 범위로 이루어져야함.
            let regExp = /^[a-z][a-z\d]{3,11}$/;
            if(!regExp.test(userId)){
                alert("유효한 아이디를 입력해주세요.");
                userId.select();
                return false;
            }

            // 2) 비밀번호 검사
            //    영문자(대,소문자) , 숫자 , 특수문자(!@#$%^)로 총 8~15글자로 이루어져야함.
            regExp = /^[a-z\d!@#$%^]{8,15}$/i;
            if(!regExp.test(userPwd)){
                alert("유효한 비밀번호를 입력해주세요.");
                userPwd.value = "";
                userPwd.focus();
                return false;
            }

            // 3) 비밀번호 일치
            if(userPwd != pwdCheck){
                alert("동일한 비밀번호로 입력해주세요.");
                pwdCheck.value = "";
                pwdCheck.focus();
                return false;
            }

            // 4) 이름 검사
            //    한글(결합) 로만 2글자 이상.
            regExp = /^[가-힣]{2,}$/;
            if(!regExp.test(userName)){
                alert("유효한 이름을 입력해주세요.");
                userName.select();
                return false;
            }
            return true;

        }
    </script>
</body>
</html>